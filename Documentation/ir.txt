-*- outline -*-

* Intermediate Representation (IR)

** string

{ irt: "string", s: <<string>> }

*** Description

A literal string.

** lambda

{ irt: "lambda", req_params: <<req_param_names>>, body: <<body_ir>> }

req_param_names: an array of strings
body_ir: IR of the lambda's body

*** Description

First-class function abstraction.

** progn

{ irt: "progn", exprs: <<expr_irs>> }

*** Description

Evaluates multiple expressions in sequence.

** defvar

{ irt: "defvar", name: <<name>>, value: <<value_ir>> }

name: a symbol
value_ir: IR of the variable's value, evaluated

*** Description

Establishes a binding in the top level environment.

** defun

{ irt: "defun", name: <<name>>, lambda: <<lambda_ir>> }

name: a string
lambda_ir: IR for the function's body

*** Description

Registers a function in the global environment.

** flet

** function, #'

{ irt: "function", name: <<name>> }

name: the function name, a string

*** Description

Accesses the function binding with the given name, i.e. performs a
lookup in the function namespace.

#'foo is equivalent to (function foo).

** apply

{ irt: "apply", fun: <<fun_ir>>, args: <<arg_irs>> }

fun_ir: IR for function to call, evaluated
arg_irs: IRs for function arguments, each evaluated

*** Description

Calls a function supplied as a parameter.

** set-method

{ irt: "set-method", name: <<string>>, class: <<class_ir>>, lambda: <<lambda_ir>> }

*** Description

Binds a method in the class' vtable.

** make-class

{ irt: "make-class", name: <<string>>, members: <<member_names>> }

*** Description

Creates a class object.

** make-instance

{ irt: "make-instance", class: <<class_ir>> }

*** Description

Creates an instance of a class.

** invoke-method

{ irt: "invoke-method", name: <<string>>, params: <<param_irs>> }

** unwind-protect

** catch

** handle

** throw

** set

{ irt: "set", name: <<string>>, value: <<value_ir>> }

** call-with-escape-continuation, call/ec

** defmacro

** quasiquote, unquote, unquote-splicing

** if

** eval

** var

{ irt: "var", name: <<string>> }

*** Description

Accesses the value of the variable.
